<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Ball Bounce</title>
	<style>
canvas {
	background:#aaa;

}
}</style>
</head>
<body>
	<canvas id="canvas" width=800 height=500 ></canvas>
	<script>
	function color(){
		var c='#'+Math.floor(Math.random()*16777215).toString(16);
		if (c!='#aaaaaa')
			return c;
		else
			color();		
	}
	var canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d"),
    W = canvas.width, 
    H = canvas.height,
    gravity = .5,
    bounceFactor = .8;

function Ball(x, y) {
  this.x = x;
  this.y = y;
  this.r = 15;
  this.color = color();
  this.vx = 0;
  this.vy = 1;
  this.count=0;
}

Ball.prototype = {
  draw: function() {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);
    ctx.fillStyle = this.color;
    ctx.fill();
    ctx.closePath();
  },

  update: function() {
    this.y +=
    if (this.y + this.r > canvas.height) {
      this.y = H - this.r;
      this.vy*=bounceFactor;
      this.count++;
      if(this.count<15)
      this.vy=-this.vy;
    }
  }
};

function clearCanvas() {
  ctx.clearRect(0, 0, W, H);
}

var balls = []; 

canvas.addEventListener('click', function(event) {
  var rect = this.getBoundingClientRect(),  
      x = event.clientX - rect.left,
      y = event.clientY - rect.top;
  balls.push(new Ball(x, y));
});


(function update() {
  clearCanvas();
  for (var i = 0; i<balls.length; i++) {
    balls[i].draw(); 
    balls[i].update(); 
  }

  requestAnimationFrame(update);
})();
</script>
</body>
</html>
